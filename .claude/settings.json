{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Edit|Write|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "./scripts/fmt.sh",
            "description": "Auto-format code after editing files"
          }
        ]
      },
      {
        "matcher": "Edit|Write",
        "filePattern": "**/models*.py",
        "hooks": [
          {
            "type": "command",
            "command": "./scripts/check_migrations.sh",
            "description": "Check for missing migrations after editing model files"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "bash -c 'echo \"\\n=== Running Pre-Push Checks ===\\n\" && echo \"1. Running tests...\" && pytest -n auto --tb=short || { echo \"\\n‚ö†Ô∏è  TESTS FAILED - Please fix before pushing\"; exit 1; } && echo \"\\n2. Checking for CSS files in git...\" && if git diff --cached --name-only | grep -q \"\\.css$\"; then echo \"\\n‚ö†Ô∏è  WARNING: CSS files should not be committed (auto-generated from SCSS)\"; git diff --cached --name-only | grep \"\\.css$\"; fi && echo \"\\n3. Checking git status...\" && git status && echo \"\\n‚úÖ All checks passed! Remember to commit and push your changes.\" && echo \"\\nüìã Critical workflow: Format ‚úì | Test ‚úì | Commit ‚Üí Push\"'",
            "description": "Run tests and checks before finishing session"
          }
        ]
      }
    ]
  }
}
